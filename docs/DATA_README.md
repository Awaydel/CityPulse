# DATA_README.md: Источники, Схема и Ограничения Данных
=====================================================

## 1. Источники Данных
----------------------
*   **Качество воздуха (AQ):** OpenAQ REST API.
*   **Погода (Weather):** Open-Meteo Historical/Forecast API.

## 2. Логическая Модель Данных (Star Schema)
---------------------------------------------

Витрина построена на основе модели "Звезда".

### Таблица Фактов: `fact_air_quality`

| Поле | Тип данных | Описание |
| :--- | :--- | :--- |
| `fact_aq_pk` | INT (PK) | Суррогатный ключ. |
| `dim_city_fk` | INT (FK) | Ссылка на город . |
| `dim_metric_fk` | INT (FK) | Ссылка на загрязнитель (PM2.5, PM10 и т.д.). |
| `timestamp_utc` | DATETIME | Время измерения (почасовая агрегация). |
| `value` | FLOAT | Концентрация в μg/m³. |
| `station_count` | INT | Число станций, использованных в агрегации. |

### Таблица Измерений: `dim_city`

| Поле | Тип данных | Описание |
| :--- | :--- | :--- |
| `dim_city_pk` | INT (PK) | Суррогатный ключ. |
| `city_name` | VARCHAR | Название города. |
| `timezone_name` | VARCHAR | Часовой пояс (для корректной работы с API). |

---

## 3. Ключевые Ограничения Качества (Data Quality Checks)
---------------------------------------------------------
(Полностью описаны в TESTING.md, но дублируются здесь как ограничения схемы)

1.  **Уникальность:** Комбинация (`dim_city_fk`, `timestamp_utc`, `dim_metric_fk`) должна быть уникальна.
2.  **Целостность ссылок (FK):** Все внешние ключи должны быть валидны.
3.  **Диапазоны:** Значения `value` должны быть неотрицательными и в разумных физических пределах.