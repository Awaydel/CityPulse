# Реестр рисков и план управления

## 1. Введение

Данный документ содержит подробный реестр проектных рисков, оценку их вероятности и влияния, а также стратегии смягчения последствий и планы реагирования.

## 2. Методология оценки

Риски оцениваются по двум параметрам:
*   **Вероятность (Probability):** Низкая, Средняя, Высокая.
*   **Влияние (Impact):** Низкое, Среднее, Высокое, Критическое.

## 3. Реестр рисков

| ID | Описание риска | Вероятность | Влияние | Стратегия | Ответственный | Статус |
|:---|:---|:---|:---|:---|:---|:---|
| **R-001** | **Изменение API внешних источников данных** (Open-Meteo). Поставщик данных может изменить формат ответов, endpoints или ввести ограничения (rate limits) без предварительного уведомления. | Средняя | Высокое | Снижение | Lead Developer | Мониторинг |
| **R-002** | **Низкая точность ML модели**. Модель линейной регрессии может показать коэффициент детерминации (R2) ниже 0.3 из-за недостатка данных или слабой корреляции признаков. | Средняя | Среднее | Принятие | Data Scientist | Закрыт (Решено) |
| **R-003** | **Рассинхронизация схемы БД и API**. Изменения в структуре таблиц базы данных могут привести к падению бэкенда при отсутствии соответствующих обновлений в Pydantic моделях. | Низкая | Высокое | Снижение | Backend Lead | Закрыт (Решено) |
| **R-004** | **Аномалии в качестве данных (Data Quality)**. Превышение порога в 0.5% некорректных данных (отрицательные значения, пропуски) может исказить аналитику. | Средняя | Среднее | Снижение | QA Engineer | Закрыт (Решено) |
| **R-005** | **Недостаточное тестовое покрытие**. Покрытие кода тестами (Code Coverage) ниже 70% увеличивает риск пропуска дефектов в продакшн. | Низкая | Среднее | Снижение | QA Lead | Закрыт (Решено) |
| **R-006** | **Потеря данных или сбой СУБД**. Технический сбой сервера базы данных может привести к потере накопленных исторических данных. | Низкая | Критическое | Избегание | DevOps | Мониторинг |

## 4. План мероприятий по снижению рисков (Mitigation Plan)

### R-001: Изменение API внешних источников
*   **Меры:** Реализовано адаптивное логирование ошибок запросов. Используется версионирование вызовов API.
*   **План действий (Trigger):** При получении ошибок 4xx/5xx от внешнего сервиса.
    1. Проверить статус внешнего сервиса.
    2. Реализовать механизм повторных запросов (retry) с экспоненциальной задержкой.
    3. При изменении контракта API — оперативно обновить Pydantic схемы клиента.

### R-002: Низкая точность ML модели
*   **Меры:** Внедрен механизм Quality Gate. Если R2 < 0.3, система логирует предупреждение, но не останавливает процесс, помечая прогноз как "ненадежный".
*   **Результат:** Риск принят как допустимый для текущей версии MVP.

### R-003: Рассинхронизация схемы БД и API
*   **Меры:** Внедрена строгая типизация через Pydantic.
*   **Результат:** Тесты API автоматически проверяют соответствие ответов ожидаемым схемам.

### R-004: Аномалии в качестве данных
*   **Меры:** Разработан и внедрен модуль Data Quality.
*   **План действий (Trigger):** При срабатывании алерта (Violation Rate > 0.5%).
    1. Автоматическая пометка пакета данных флагом "Red Flag".
    2. Генерация отчета `dq_violations.csv`.
    3. Уведомление QA инженера для анализа источника аномалий.

### R-005: Недостаточное тестовое покрытие
*   **Меры:** Внедрен CI/CD пайплайн с блокировкой мерджа (Merge Block), если покрытие падает ниже 70%.
*   **Результат:** Текущее покрытие составляет 92%.

### R-006: Потеря данных или сбой СУБД
*   **Меры:** Рекомендуется настройка регулярного резервного копирования (Backup) базы данных PostgreSQL (pg_dump) раз в сутки.
*   **План действий (Trigger):** При недоступности БД.
    1. Переключение на реплику (если настроена).
    2. Восстановление из последнего бэкапа.
